@using Microsoft.AspNetCore.Http;
@{
    ViewData["Title"] = "Home Page";
    var healthPercent = Convert.ToDouble(Context.Session.GetString("healthPercent"));
    var leafSpotPercent = Convert.ToDouble(Context.Session.GetString("leafSpotPercent"));
    var powderyPercent = Convert.ToDouble(Context.Session.GetString("powderyPercent"));

    var healthyDiagnosisToday = Context.Session.GetInt32("healthyDiagnosisToday");
    var leafSpotDiagnosisToday = Context.Session.GetInt32("leafSpotDiagnosisToday");
    var powderyDiagnosisToday = Context.Session.GetInt32("powderyDiagnosisToday");

    var totalFarmer = Context.Session.GetInt32("totalFarmer");
    var totalExpert = Context.Session.GetInt32("totalExpert");
    var totalPrediction = Context.Session.GetInt32("totalPrediction");

    var arrayListDays = Context.Session.GetString("arrayListDays");
    var arrayListPrediction = Context.Session.GetString("arrayListPrediction");
}

<link rel="stylesheet" href="~/css/home.css" type="text/css" />
<style type="text/css">
    .card {
        overflow: hidden;
    }

    .card-block .rotate {
        z-index: 8;
        float: right;
        height: 100%;
    }

        .card-block .rotate i {
            color: rgba(20, 20, 20, 0.15);
            position: absolute;
            left: 0;
            left: auto;
            right: -10px;
            bottom: 0;
            display: block;
            -webkit-transform: rotate(-44deg);
            -moz-transform: rotate(-44deg);
            -o-transform: rotate(-44deg);
            -ms-transform: rotate(-44deg);
            transform: rotate(-44deg);
        }
</style>

@if (Context.Session.GetString("role") == "MEMBER")
{
    <div class="text-center">
        <h1 class="display-4">Welcome to our website</h1>
        <p>Detect about <a href="">Symptoms of a strawberry
            <br />
                <h3>Notices your strawberry with strange appearance and symptom?</h3>
        </a>.</p>
    </div>

    <section>
        <div class="container py-5">
            <div class="row">
                <div class="col-md-12">
                    <div class="main-timeline">
                        <div class="timeline">
                            <div class="timeline-content">
                                <div class="circle">
                                    <span class="homebox">
                                        <img src="https://static.vecteezy.com/system/resources/previews/004/511/733/original/camera-icon-on-white-background-vector.jpg" width="164" height="164"class="img">
                                    </span>
                                </div>
                                <div class="content">
                                    <span class="year">Step.1</span>
                                    <h3 class="title h4"></h3>
                                    <p class="description">
                                        <h3>Take picture of your infected strawberry</h3>
                                    </p>
                                    <div class="icon"><span></span></div>
                                </div>
                            </div>
                        </div>
                        <div class="timeline">
                            <div class="timeline-content">
                                <div class="circle"><span class="homebox"><img src="https://cdn.discordapp.com/attachments/320416265661448202/1038725034291769344/image.png" width="164" height="164" class="img" /></span></div>
                                <div class="content">
                                    <span class="year">Step.2</span>
                          
                                    <p class="description">
                                        <h3>Go to https://sdddsystem.com<br/>
                                            Upload your picture via website
                                        </h3>
                                    </p>
                                    <div class="icon"><span></span></div>
                                </div>
                            </div>
                        </div>
                        <div class="timeline">
                            <div class="timeline-content">
                                <div class="circle"><span class="homebox"><img src="https://cdn-icons-png.flaticon.com/512/272/272471.png" width="164" height="164" class="img"></span></div>
                                <div class="content">
                                    <span class="year">Step.3</span>
                               
                                    <p class="description">
                                       <h3>Sit down and please wait for our system to analyze the image</h3>
                                    </p>
                                    <div class="icon"><span></span></div>
                                </div>
                            </div>
                        </div>
                        <div class="timeline">
                            <div class="timeline-content">
                                <div class="circle"><span class="homebox"><img src="https://thumbs.dreamstime.com/b/two-businessman-consult-office-desk-flat-illustration-vector-128419665.jpg"width="164" height="164"class="img"></span></div>
                                <div class="content">
                                    <span class="year">Step.4</span>
                                    <p class="description">
                                        <h3>Consult to profressionals about the result symptom</h3>
                                    </p>
                                    <div class="icon"><span></span></div>
                                </div>
                            </div>
                        </div>
                        <div class="timeline">
                            <div class="timeline-content">
                                <div class="circle"><span class="homebox"><img src="https://t3.ftcdn.net/jpg/01/08/24/90/360_F_108249056_LF6VqEXmnNXW77N6Gnl7Fn6OZqIOqfF2.jpg" width=" 164" height="164" class="img"></span></div>
                                <div class="content">
                                    <span class="year">Step.5</span>
                                
                                    <p class="description">
                                        <h3>Navigate through our websites to see other information abour sympton and preventative measures</h3>
                                    </p>
                                    <div class="icon"><span></span></div>
                                </div>
                            </div>
                        </div>
                        <div class="timeline">
                            <div class="timeline-content">
                                <div class="circle"><span class="homebox"><img src="https://picsum.photos/164" class="img"></span></div>
                                <div class="content">
                                    <span class="year">No.6</span>
                                    <h3 class="title h4">Heading</h3>
                                    <p class="description">
                                        Eu feugiat pretium nibh ipsum consequat. Et molestie ac feugiat sed lectus vestibulum mattis. Sit amet consectetur adipiscing elit duis tristique.
                                    </p>
                                    <div class="icon"><span></span></div>
                                </div>
                            </div>
                        </div>
                        <div class="timeline">
                            <div class="timeline-content">
                                <div class="circle"><span class="homebox"><img src="https://picsum.photos/164" class="img"></span></div>
                                <div class="content">
                                    <span class="year">No.7</span>
                                    <h3 class="title h4">Heading</h3>
                                    <p class="description">
                                        Egestas fringilla phasellus faucibus scelerisque eleifend donec. Vitae justo eget magna fermentum iaculis. Euismod lacinia at quis risus sed vulputate. Congue nisi vitae suscipit tellus mauris a diam.
                                    </p>
                                    <div class="icon"><span></span></div>
                                </div>
                            </div>
                        </div>
                        <div class="timeline">
                            <div class="timeline-content">
                                <div class="circle"><span class="homebox"><img src="https://picsum.photos/164" class="img"></span></div>
                                <div class="content">
                                    <span class="year">No.8</span>
                                    <h3 class="title h4">Heading</h3>
                                    <p class="description">
                                        Eget nunc scelerisque viverra mauris in aliquam. Nibh tortor id aliquet lectus.
                                    </p>
                                    <p class="description">
                                        Semper quis lectus nulla at volutpat diam. Scelerisque purus semper eget duis at tellus at urna condimentum. Nisl suscipit adipiscing bibendum est.
                                    </p>
                                    <p class="description">
                                        Nisi vitae suscipit tellus mauris. Dignissim diam quis enim lobortis scelerisque fermentum dui faucibus. Placerat orci nulla pellentesque dignissim enim sit amet venenatis urna.
                                    </p>
                                    <div class="icon"><span></span></div>
                                </div>
                            </div>
                        </div>
                        <div class="timeline">
                            <div class="timeline-content">
                                <div class="circle"><span class="homebox"><img src="https://picsum.photos/164" class="img"></span></div>
                                <div class="content">
                                    <span class="year">No.9</span>
                                    <h3 class="title h4">Heading</h3>
                                    <p class="description">
                                        Sit amet consectetur adipiscing elit ut. Dolor morbi non arcu risus quis varius quam quisque. Quis ipsum suspendisse ultrices gravida dictum fusce ut placerat orci.
                                    </p>
                                    <p class="description">
                                        Elementum sagittis vitae et leo. Risus pretium quam vulputate dignissim suspendisse in est ante in.
                                    </p>
                                    <div class="icon"><span></span></div>
                                </div>
                            </div>
                        </div>
                        <div class="timeline">
                            <div class="timeline-content">
                                <div class="circle"><span class="homebox"><img src="https://picsum.photos/164" class="img"></span></div>
                                <div class="content">
                                    <span class="year">No.10</span>
                                    <h3 class="title h4">Heading</h3>

                                    <p class="description">
                                        Tellus in hac habitasse platea. Commodo nulla facilisi nullam vehicula ipsum a. Quis commodo odio aenean sed adipiscing. Ipsum consequat nisl vel pretium lectus. Dolor morbi non arcu risus quis varius. Mi bibendum neque egestas congue quisque egestas diam in.
                                    </p>
                                    <p class="description">
                                        Id eu nisl nunc mi ipsum faucibus vitae aliquet. Placerat orci nulla pellentesque dignissim enim.
                                    </p>

                                    <div class="icon"><span></span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
}

<div class="row mb-5">
    <div class="col-xl-4 col-lg-6">
        <div class="card card-inverse card-danger">
            <div class="card-block bg-danger" style="padding: 10px 10px 5px 10px;color: wheat;">
                <div class="rotate">
                    <i class="fa fa-list fa-4x"></i>
                </div>
                <h6 class="text-uppercase">Total Farmer</h6>
                <h1 class="display-1">@totalFarmer</h1>
            </div>
        </div>
    </div>
    <div class="col-xl-4 col-lg-6">
        <div class="card card-inverse card-success">
            <div class=" card-block bg-success" style="padding: 10px 10px 5px 10px;color: wheat;">
                <div class="rotate">
                    <i class="fa fa-user fa-5x"></i>
                </div>
                <h6 class="text-uppercase">Total Expert</h6>
                <h1 class="display-1">@totalExpert</h1>
            </div>
        </div>
    </div>
    <div class="col-xl-4 col-lg-6">
        <div class="card card-inverse card-info">
            <div class="card-block bg-info" style="padding: 10px 10px 5px 10px;color: wheat;">
                <div class="rotate">
                    <i class="fa-solid fa-magnifying-glass fa-5x"></i>
                </div>
                <h6 class="text-uppercase">Total Predict</h6>
                <h1 class="display-1">@totalPrediction</h1>
            </div>
        </div>
    </div>
</div>
<hr/>

<div class="row">
    <h1 class="font-weight-bold mb-5">STRAWBERRRY DISEASE STATICS : </h1>
    <div class="col-md-12 d-flex justify-content-center mb-5">
        <div class="col-md-6" style="height:500px">
            <canvas id="polarArea" width="200" height="200"></canvas>
        </div>
    </div>
    <hr>
    <h1 class="font-weight-bold mb-5">TOTAL PREDICTION TODAY : </h1>
    <div class="col-md-12 d-flex justify-content-center mb-5">
        <div class="col-md-6">
        <canvas id="myBarChart"></canvas>
        </div>
    </div>
    <hr >
    <h1 class="font-weight-bold mb-5">TOTAL DIAGNOSIS LAST 7 DAYS : </h1>
    <div class="col-md-12 d-flex justify-content-center mb-5">
        <div class="col-md-6">
            <canvas id="myLineChart"></canvas>
        </div>
    </div>
    <hr >
</div>





@*<div class="row mb-2">
    <div class="col-md-4 d-flex justify-content-center" style="height:500px">
        <canvas id="polarArea" width="200" height="200"></canvas>
    </div>
    <div class="col-md-4 d-flex justify-content-center" >
        <canvas id="myBarChart"></canvas>
    </div>
    <div class="col-md-4">
        <canvas id="myLineChart"></canvas>
    </div>
</div>
*@

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    const ctxPolar = document.getElementById('polarArea').getContext('2d');
    new Chart(ctxPolar, {
        type: 'polarArea',
        data: {
            labels: ['Strawberry Healthy Leaf', 'Strawberry Leaf Spot', 'Strawberry Powdery Mildew Leaf'],
            datasets: [{
                label: 'Correct Diagnosis Percent',
                data: [(@healthPercent * 100), (@leafSpotPercent * 100), (@powderyPercent * 100)],
                backgroundColor: [
                    'rgb(255, 99, 132)',
                    'rgb(255, 205, 86)',
                    'rgb(40, 167, 69)'
                ]
            }]
        },
    });
</script>
<script>
    const ctxBar = document.getElementById('myBarChart').getContext('2d');
    new Chart(ctxBar, {
        type: 'bar',
        data: {
            labels: ['Strawberry Healthy Leaf', 'Strawberry Leaf Spot', 'Strawberry Powdery Mildew Leaf'],
            datasets: [{
                label: 'Total Prediction Today',
                data: [@healthyDiagnosisToday, @leafSpotDiagnosisToday, @powderyDiagnosisToday],
                backgroundColor: [
                    'rgba(255, 99, 132, 0.2)',
                    'rgba(255, 205, 86, 0.2)',
                    'rgba(54, 162, 235, 0.2)'
                ],
                borderColor: [
                    'rgb(255, 99, 132)',
                    'rgb(255, 205, 86)',
                    'rgb(54, 162, 235)'
                ],
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
</script>
<script>
    const labels = @arrayListDays;
    const data = {
        labels: labels,
        datasets: [{
            label: 'Total Diagnosis Last 7 days',
            backgroundColor: 'rgb(255, 99, 132)',
            borderColor: 'rgb(255, 99, 132)',
            data: @arrayListPrediction,
        }]
    } ;


    const config = {
        type: 'line',
        data: data,
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    };
    const myLineChart = new Chart(
        document.getElementById('myLineChart'),
        config
    );
</script>